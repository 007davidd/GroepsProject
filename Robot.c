#pragma config(Sensor, S1,     Bumper,         sensorTouch)
#pragma config(Sensor, S2,     Sonar,          sensorSONAR)
#pragma config(Sensor, S3,     Licht,          sensorLightInactive)
#pragma config(Sensor, S4,     LichtRGB,       sensorLightActive)
#pragma config(Motor,  motorA,          MotorLinks,    tmotorNXT, openLoop, encoder)
#pragma config(Motor,  motorB,           ,             tmotorNXT, openLoop)
#pragma config(Motor,  motorC,          MotorRechts,   tmotorNXT, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

// Globale variable
bool bump = false;
bool line = false;

task rij(){
	int speedR = 0;
	int speedL = 0;
	long R = nMotorEncoder[MotorRechts];
	long L = nMotorEncoder[MotorLinks];
	nxtDisplayString(4, "%d", (nMotorEncoder[MotorRechts] - R));
	nxtDisplayString(5, "%d", (nMotorEncoder[MotorLinks] - L));
	while(speedR < 50 && speedL < 50){
		speedR+=10;
		speedL+=10;
		motor[MotorRechts]=speedR;
		motor[MotorLinks]=speedL;
		nxtDisplayString(4, "%d", nMotorEncoder[MotorRechts] - R);
		nxtDisplayString(5, "%d", nMotorEncoder[MotorLinks] - L);
		wait1Msec(500);
	}
}
task stopRij(){
		while(speedR < 100 && speedL < 100){
			speedR-=5;
			speedL-=5;
			motor[MotorRechts]=speedR;
			motor[MotorLinks]=speedL;
			wait1Msec(500);
	}
}

task sense(){
	// lees de sensoren
	while(true){
		if(SensorValue[Bumper] == 1){
			// stop na botsing en back-off
			StopTask(rij);
			StopTask(stopRij);
			speedR=0;
			speedL=0;
			motor[MotorRechts]=-5;
			motor[MotorLinks]=-5;
			wait1Msec(1000);
			motor[MotorRechts]=0;
			motor[MotorLinks]=0;
		}


	}
}

task main()
{
	nSyncedMotors = synchAC;
	nSyncedTurnRatio = 100;

	// start met rijden
	StartTask(rij);
	// start met het lezen van sensoren
	StartTask(sense);
	while(true){}
	/*nxtDisplayString(4, "%d", SensorValue[Bumper]);
	wait1Msec(5000);*/

}
